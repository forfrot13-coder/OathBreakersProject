{% load static %}
<div x-show="currentTab === 'home'" x-cloak x-transition.opacity.duration.300ms>
    <div class="glass-panel rounded-2xl p-4 mb-6 flex items-center gap-4">
        <div class="w-16 h-16 rounded-full bg-gray-800 border-2 border-purple-500 overflow-hidden relative">
            <img x-show="profile.avatar_url" :src="profile.avatar_url" class="w-full h-full object-cover">
            <div x-show="!profile.avatar_url" class="flex items-center justify-center h-full text-2xl">ğŸ‘¤</div>
        </div>
        <div>
            <h2 class="font-bold text-lg text-white" x-text="profile.username">...</h2>
            <div class="text-xs text-gray-400">Commander</div>
        </div>
    </div>

    <!-- Level Progress -->
    <div class="glass-panel rounded-xl p-3 mb-4 relative overflow-hidden">
        <div class="flex justify-between items-end mb-1">
            <span class="text-xs font-bold text-blue-300">Level <span x-text="profile.level"></span></span>
            <span class="text-[10px] text-gray-400">Multiplier: <span class="text-green-400"
                    x-text="'x' + profile.mining_multiplier"></span></span>
        </div>
        <div class="h-3 bg-gray-800 rounded-full overflow-hidden border border-white/5">
            <div class="h-full bg-gradient-to-r from-blue-600 to-cyan-400 transition-all duration-500"
                :style="'width: ' + ((profile.xp / profile.next_level_xp) * 100) + '%'"></div>
        </div>
        <div class="text-right mt-1">
            <span class="text-[9px] text-gray-500"><span x-text="formatNumber(profile.xp)"></span> / <span
                    x-text="formatNumber(profile.next_level_xp)"></span> XP</span>
        </div>
    </div>

    <!-- Stats -->
    <div class="grid grid-cols-2 gap-3 mb-6">
        <div class="glass-panel p-3 rounded-xl flex flex-col items-center justify-center h-24">
            <span class="text-2xl mb-1">âš¡</span>
            <span class="text-xs text-gray-400">Ù‚Ø¯Ø±Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬</span>
            <div class="flex items-baseline gap-1 mt-1">
                <span class="font-bold text-yellow-500 text-xl" x-text="profile.total_mining_rate"></span>
                <span class="text-[10px] text-gray-500">/hr</span>
            </div>
        </div>
        <div class="glass-panel p-3 rounded-xl flex flex-col items-center justify-center h-24">
            <img src="{% static 'game/images/icon_fragment.png' %}" alt="Fragment" class="w-6 h-6 object-contain">
            <span class="text-xs text-gray-400">Vow Fragments</span>
            <span class="font-bold text-purple-400 mt-1" x-text="formatNumber(profile.vow_fragments)"></span>
        </div>
    </div>

    <!-- Claim Button -->
    <button @click="claimMining()" :disabled="loading.claim"
        class="w-full py-4 rounded-2xl font-bold text-xl shadow-lg transition-transform flex items-center justify-center gap-2 mb-6 relative overflow-hidden"
        :class="loading.claim ? 'bg-gray-700 cursor-not-allowed' : 'bg-gradient-to-r from-green-700 to-emerald-600 hover:from-green-600 active:scale-95 shadow-green-900/40'">
        <span x-show="!loading.claim" class="flex items-center gap-2"><span>ğŸ’°</span><span>Ø¨Ø±Ø¯Ø§Ø´Øª Ø¯Ø±Ø¢Ù…Ø¯</span></span>
        <span x-show="loading.claim" class="flex items-center gap-2">
            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                </path>
            </svg>
            <span>Ø¯Ø± Ø­Ø§Ù„ ÙˆØ§Ø±ÛŒØ²...</span>
        </span>
    </button>

    <!-- Quick Actions (Ú†ÙˆÙ† Ø§Ø² Ù†ÙˆÛŒÚ¯ÛŒØ´Ù† Ø­Ø°Ù Ø´Ø¯Ù†Ø¯) -->
    <div class="grid grid-cols-2 gap-3 mb-4">
        <button @click="currentTab = 'leaderboard'"
            class="glass-panel p-3 rounded-xl text-center text-xs text-blue-300 hover:bg-white/5">
            ğŸ† Ø±ØªØ¨Ù‡â€ŒØ¨Ù†Ø¯ÛŒ
        </button>
        <button @click="currentTab = 'exchange'"
            class="glass-panel p-3 rounded-xl text-center text-xs text-indigo-300 hover:bg-white/5">
            ğŸ’± ØµØ±Ø§ÙÛŒ
        </button>
    </div>
    
    <div class="mb-6">
        <button @click="currentTab = 'blackmarket'; fetchMarketListings()"
            class="w-full glass-panel p-4 rounded-xl text-center text-sm text-red-400 hover:bg-red-900/10 border border-red-900/30 font-bold flex items-center justify-center gap-2">
            <span>â˜ ï¸</span> Ø¨Ø§Ø²Ø§Ø± Ø³ÛŒØ§Ù‡
        </button>
    </div>
</div>